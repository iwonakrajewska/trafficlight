CREATE SCHEMA  IF NOT EXISTS  TRAFFICLIGHTS;


CREATE TABLE "TRAFFICLIGHTS"."PROGRAM"
(
   ID integer PRIMARY KEY NOT NULL,
   TITLE varchar(32),
   DESCRIPTION varchar(128)
)
;
CREATE UNIQUE INDEX PKProgram ON "TRAFFICLIGHTS"."PROGRAM"(ID)
;


CREATE TABLE "TRAFFICLIGHTS"."PROGRAM_SCHEDULE"
(
   ID integer PRIMARY KEY NOT NULL,
   PROGRAM_ID integer,
   PRIORITY integer,
   WEEK_DAY_NUMBER integer,
   START_TIME time,
   END_TIME time
)
;
ALTER TABLE "TRAFFICLIGHTS"."PROGRAM_SCHEDULE" ADD CONSTRAINT CONSTRAINT_E9 FOREIGN KEY (PROGRAM_ID) REFERENCES "TRAFFICLIGHTS"."PROGRAM"(ID)
;
CREATE UNIQUE INDEX PRIMARY_KEY_4 ON "TRAFFICLIGHTS"."PROGRAM_SCHEDULE"(ID)
;
CREATE UNIQUE INDEX PRIMARY_KEY_44 ON "TRAFFICLIGHTS"."PROGRAM_SCHEDULE"(ID)
;
CREATE INDEX FK_CHILD_IDX ON "TRAFFICLIGHTS"."PROGRAM_SCHEDULE"(PROGRAM_ID)
;


CREATE TABLE "TRAFFICLIGHTS"."PROGRAM_STEPS"
(
   ID integer PRIMARY KEY NOT NULL,
   PROGRAM_ID integer,
   STEP_SEQUENCE integer,
   STEP_DURATION bigint
)
;
ALTER TABLE "TRAFFICLIGHTS"."PROGRAM_STEPS" ADD CONSTRAINT CONSTRAINT_20 FOREIGN KEY (PROGRAM_ID) REFERENCES "TRAFFICLIGHTS"."PROGRAM"(ID)
;
CREATE INDEX FKSTPR ON "TRAFFICLIGHTS"."PROGRAM_STEPS"(PROGRAM_ID)
;
CREATE UNIQUE INDEX STEPSEQUENCE_INDEX_9 ON "TRAFFICLIGHTS"."PROGRAM_STEPS"
(
  PROGRAM_ID,
  STEP_SEQUENCE
)
;
CREATE UNIQUE INDEX PRIMARY_KEY_9 ON "TRAFFICLIGHTS"."PROGRAM_STEPS"(ID)
;


CREATE TABLE "TRAFFICLIGHTS"."STEP_CONFIG"
(
   ID integer PRIMARY KEY NOT NULL,
   STEP_ID integer,
   SEMAPHORE_TYPE_ID integer,
   COLOUR_ID integer
)
;
ALTER TABLE "TRAFFICLIGHTS"."STEP_CONFIG" ADD CONSTRAINT CONSTRAINT_F3 FOREIGN KEY (STEP_ID) REFERENCES "TRAFFICLIGHTS"."PROGRAM_STEPS"(ID)
;
CREATE UNIQUE INDEX IX_ST_CONF_ID ON "TRAFFICLIGHTS"."STEP_CONFIG"(ID)
;
CREATE UNIQUE INDEX IX_ST_CONF ON "TRAFFICLIGHTS"."STEP_CONFIG"
(
  STEP_ID,
  SEMAPHORE_TYPE_ID
)
;
